<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section - 4 Data Prep | Cryptocurrency Research</title>
  <meta name="description" content="Section - 4 Data Prep | Cryptocurrency Research" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Section - 4 Data Prep | Cryptocurrency Research" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section - 4 Data Prep | Cryptocurrency Research" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="explore-data.html"/>
<link rel="next" href="visualization.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.15/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Cryptocurrency Research</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#what-will-i-learn"><i class="fa fa-check"></i><b>1.1</b> What will I learn?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#before-getting-started"><i class="fa fa-check"></i><b>1.2</b> Before Getting Started</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#high-level-version"><i class="fa fa-check"></i><b>1.2.1</b> High-Level Version</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#format-notes"><i class="fa fa-check"></i><b>1.3</b> Format Notes</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#who-is-this-tutorial-for"><i class="fa fa-check"></i><b>1.4</b> Who is this tutorial for?</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#plan-of-attack"><i class="fa fa-check"></i><b>1.5</b> Plan of Attack</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#github-repository"><i class="fa fa-check"></i><b>1.6</b> GitHub Repository</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i><b>1.7</b> Disclaimer</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>2</b> Setup and Installation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="setup.html"><a href="setup.html#option-1---run-in-the-cloud"><i class="fa fa-check"></i><b>2.1</b> Option 1 - Run in the Cloud</a></li>
<li class="chapter" data-level="2.2" data-path="setup.html"><a href="setup.html#option-2---run-locally"><i class="fa fa-check"></i><b>2.2</b> Option 2 - Run Locally</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="setup.html"><a href="setup.html#setup-r"><i class="fa fa-check"></i><b>2.2.1</b> Setup R</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="setup.html"><a href="setup.html#installing-and-loading-packages"><i class="fa fa-check"></i><b>2.3</b> Installing and Loading Packages</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="setup.html"><a href="setup.html#github-repository-1"><i class="fa fa-check"></i><b>2.3.1</b> GitHub Repository</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="explore-data.html"><a href="explore-data.html"><i class="fa fa-check"></i><b>3</b> Explore the Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="explore-data.html"><a href="explore-data.html#pull-the-data"><i class="fa fa-check"></i><b>3.1</b> Pull the Data</a></li>
<li class="chapter" data-level="3.2" data-path="explore-data.html"><a href="explore-data.html#data-preview"><i class="fa fa-check"></i><b>3.2</b> Data Preview</a></li>
<li class="chapter" data-level="3.3" data-path="explore-data.html"><a href="explore-data.html#the-definition-of-a-price"><i class="fa fa-check"></i><b>3.3</b> The definition of a “price”</a></li>
<li class="chapter" data-level="3.4" data-path="explore-data.html"><a href="explore-data.html#data-quality"><i class="fa fa-check"></i><b>3.4</b> Data Quality</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-prep.html"><a href="data-prep.html"><i class="fa fa-check"></i><b>4</b> Data Prep</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-prep.html"><a href="data-prep.html#remove-nulls"><i class="fa fa-check"></i><b>4.1</b> Remove Nulls</a></li>
<li class="chapter" data-level="4.2" data-path="data-prep.html"><a href="data-prep.html#calculate-price_usd-column"><i class="fa fa-check"></i><b>4.2</b> Calculate <code>price_usd</code> Column</a></li>
<li class="chapter" data-level="4.3" data-path="data-prep.html"><a href="data-prep.html#clean-data-by-group"><i class="fa fa-check"></i><b>4.3</b> Clean Data by Group</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-prep.html"><a href="data-prep.html#remove-symbols-without-enough-rows"><i class="fa fa-check"></i><b>4.3.1</b> Remove symbols without enough rows</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-prep.html"><a href="data-prep.html#remove-symbols-without-data-from-the-last-3-days"><i class="fa fa-check"></i><b>4.3.2</b> Remove symbols without data from the last 3 days</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-prep.html"><a href="data-prep.html#calculate-target"><i class="fa fa-check"></i><b>4.4</b> Calculate Target</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-prep.html"><a href="data-prep.html#any-gaps"><i class="fa fa-check"></i><b>4.4.1</b> Any gaps?</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-prep.html"><a href="data-prep.html#convert-to-tsibble"><i class="fa fa-check"></i><b>4.4.2</b> Convert to tsibble</a></li>
<li class="chapter" data-level="4.4.3" data-path="data-prep.html"><a href="data-prep.html#scan-gaps"><i class="fa fa-check"></i><b>4.4.3</b> Scan gaps</a></li>
<li class="chapter" data-level="4.4.4" data-path="data-prep.html"><a href="data-prep.html#fill-gaps"><i class="fa fa-check"></i><b>4.4.4</b> Fill gaps</a></li>
<li class="chapter" data-level="4.4.5" data-path="data-prep.html"><a href="data-prep.html#calculate-target-1"><i class="fa fa-check"></i><b>4.4.5</b> Calculate Target</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-prep.html"><a href="data-prep.html#cross-validation"><i class="fa fa-check"></i><b>4.5</b> Cross Validation</a></li>
<li class="chapter" data-level="4.6" data-path="data-prep.html"><a href="data-prep.html#fix-data-by-split"><i class="fa fa-check"></i><b>4.6</b> Fix Data by Split</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="data-prep.html"><a href="data-prep.html#zero-variance"><i class="fa fa-check"></i><b>4.6.1</b> Zero Variance</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-prep.html"><a href="data-prep.html#nest-data"><i class="fa fa-check"></i><b>4.7</b> Nest data</a></li>
<li class="chapter" data-level="4.8" data-path="data-prep.html"><a href="data-prep.html#functional-programming"><i class="fa fa-check"></i><b>4.8</b> Functional Programming</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>5</b> Visualization 📉</a>
<ul>
<li class="chapter" data-level="5.1" data-path="visualization.html"><a href="visualization.html#basics---ggplot2"><i class="fa fa-check"></i><b>5.1</b> Basics - ggplot2</a></li>
<li class="chapter" data-level="5.2" data-path="visualization.html"><a href="visualization.html#using-extensions"><i class="fa fa-check"></i><b>5.2</b> Using Extensions</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="visualization.html"><a href="visualization.html#ggthemes"><i class="fa fa-check"></i><b>5.2.1</b> ggthemes</a></li>
<li class="chapter" data-level="5.2.2" data-path="visualization.html"><a href="visualization.html#plotly"><i class="fa fa-check"></i><b>5.2.2</b> plotly</a></li>
<li class="chapter" data-level="5.2.3" data-path="visualization.html"><a href="visualization.html#ggpubr"><i class="fa fa-check"></i><b>5.2.3</b> ggpubr</a></li>
<li class="chapter" data-level="5.2.4" data-path="visualization.html"><a href="visualization.html#ggforce"><i class="fa fa-check"></i><b>5.2.4</b> ggforce</a></li>
<li class="chapter" data-level="5.2.5" data-path="visualization.html"><a href="visualization.html#gganimate"><i class="fa fa-check"></i><b>5.2.5</b> gganimate</a></li>
<li class="chapter" data-level="5.2.6" data-path="visualization.html"><a href="visualization.html#ggtimeseries"><i class="fa fa-check"></i><b>5.2.6</b> ggTimeSeries</a></li>
<li class="chapter" data-level="5.2.7" data-path="visualization.html"><a href="visualization.html#rayshader"><i class="fa fa-check"></i><b>5.2.7</b> Rayshader</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="predictive-modeling.html"><a href="predictive-modeling.html"><i class="fa fa-check"></i><b>6</b> Predictive Modeling</a>
<ul>
<li class="chapter" data-level="6.1" data-path="predictive-modeling.html"><a href="predictive-modeling.html#what-is-it"><i class="fa fa-check"></i><b>6.1</b> What is it?</a></li>
<li class="chapter" data-level="6.2" data-path="predictive-modeling.html"><a href="predictive-modeling.html#example-simple-model"><i class="fa fa-check"></i><b>6.2</b> Example Simple Model</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="predictive-modeling.html"><a href="predictive-modeling.html#using-functional-programming"><i class="fa fa-check"></i><b>6.2.1</b> Using Functional Programming</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="predictive-modeling.html"><a href="predictive-modeling.html#caret"><i class="fa fa-check"></i><b>6.3</b> Caret</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="predictive-modeling.html"><a href="predictive-modeling.html#parallel-processing"><i class="fa fa-check"></i><b>6.3.1</b> Parallel Processing</a></li>
<li class="chapter" data-level="6.3.2" data-path="predictive-modeling.html"><a href="predictive-modeling.html#functional-programming---here-or-elsewhere"><i class="fa fa-check"></i><b>6.3.2</b> Functional Programming - here or elsewhere?</a></li>
<li class="chapter" data-level="6.3.3" data-path="predictive-modeling.html"><a href="predictive-modeling.html#cross-validation-1"><i class="fa fa-check"></i><b>6.3.3</b> Cross Validation</a></li>
<li class="chapter" data-level="6.3.4" data-path="predictive-modeling.html"><a href="predictive-modeling.html#xgboost-models"><i class="fa fa-check"></i><b>6.3.4</b> XGBoost models</a></li>
<li class="chapter" data-level="6.3.5" data-path="predictive-modeling.html"><a href="predictive-modeling.html#all-other-models"><i class="fa fa-check"></i><b>6.3.5</b> All Other Models</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="predictive-modeling.html"><a href="predictive-modeling.html#make-predictions"><i class="fa fa-check"></i><b>6.4</b> Make Predictions</a></li>
<li class="chapter" data-level="6.5" data-path="predictive-modeling.html"><a href="predictive-modeling.html#traditional-timeseries"><i class="fa fa-check"></i><b>6.5</b> Traditional Timeseries</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="evaluate-model-performance.html"><a href="evaluate-model-performance.html"><i class="fa fa-check"></i><b>7</b> Evaluate Model Performance</a></li>
<li class="chapter" data-level="8" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>8</b> Time Series</a></li>
<li class="chapter" data-level="9" data-path="explain-predictions.html"><a href="explain-predictions.html"><i class="fa fa-check"></i><b>9</b> Explain Predictions</a></li>
<li class="chapter" data-level="10" data-path="considerations.html"><a href="considerations.html"><i class="fa fa-check"></i><b>10</b> Considerations</a>
<ul>
<li class="chapter" data-level="10.1" data-path="considerations.html"><a href="considerations.html#session-information"><i class="fa fa-check"></i><b>10.1</b> Session Information</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="archive.html"><a href="archive.html"><i class="fa fa-check"></i><b>11</b> Archive</a>
<ul>
<li class="chapter" data-level="11.1" data-path="archive.html"><a href="archive.html#may-2020"><i class="fa fa-check"></i><b>11.1</b> May 2020</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a>
<ul>
<li class="chapter" data-level="12.1" data-path="references.html"><a href="references.html#resources-used"><i class="fa fa-check"></i><b>12.1</b> Resources Used</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="references.html"><a href="references.html#visualization-section"><i class="fa fa-check"></i><b>12.1.1</b> Visualization Section</a></li>
<li class="chapter" data-level="12.1.2" data-path="references.html"><a href="references.html#time-series-section"><i class="fa fa-check"></i><b>12.1.2</b> Time Series Section</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="references.html"><a href="references.html#packages-used-and-cited"><i class="fa fa-check"></i><b>12.2</b> Packages used and cited</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cryptocurrency Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-prep" class="section level1" number="4">
<h1><span class="header-section-number">Section - 4</span> Data Prep</h1>
<p>[ADD HERE]</p>
<div id="remove-nulls" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Remove Nulls</h2>
<p>[ADD HERE]</p>
<p>(because we can’t do anything without ask_1_price or date_time_utc at the very least being there)</p>
<p>Remove any rows where the <code>ask_1_price</code> is Null:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-prep.html#cb7-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span>cryptodata[<span class="op">!</span><span class="kw">is.na</span>(cryptodata<span class="op">$</span>ask_<span class="dv">1</span>_price), ]</span></code></pre></div>
<p>And when the <code>date_time_utc</code> is Null:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-prep.html#cb8-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span>cryptodata[<span class="op">!</span><span class="kw">is.na</span>(cryptodata<span class="op">$</span>date_time_utc), ]</span></code></pre></div>
</div>
<div id="calculate-price_usd-column" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Calculate <code>price_usd</code> Column</h2>
<p>[ADD HERE]</p>
<p>Calculate the <code>price_usd</code> using the order books data and taking the cheapest price available from the <strong>ask</strong> side where at least $15 worth of the cryptocurrency are being sold.</p>
<p>[ADD HERE]</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-prep.html#cb9-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">mutate</span>(cryptodata, </span>
<span id="cb9-2"><a href="data-prep.html#cb9-2" aria-hidden="true"></a>                     <span class="dt">trade_usd_1 =</span> ask_<span class="dv">1</span>_price <span class="op">*</span><span class="st"> </span>ask_<span class="dv">1</span>_quantity,</span>
<span id="cb9-3"><a href="data-prep.html#cb9-3" aria-hidden="true"></a>                     <span class="dt">trade_usd_2 =</span> ask_<span class="dv">2</span>_price <span class="op">*</span><span class="st"> </span>ask_<span class="dv">2</span>_quantity,</span>
<span id="cb9-4"><a href="data-prep.html#cb9-4" aria-hidden="true"></a>                     <span class="dt">trade_usd_3 =</span> ask_<span class="dv">3</span>_price <span class="op">*</span><span class="st"> </span>ask_<span class="dv">3</span>_quantity,</span>
<span id="cb9-5"><a href="data-prep.html#cb9-5" aria-hidden="true"></a>                     <span class="dt">trade_usd_4 =</span> ask_<span class="dv">4</span>_price <span class="op">*</span><span class="st"> </span>ask_<span class="dv">4</span>_quantity,</span>
<span id="cb9-6"><a href="data-prep.html#cb9-6" aria-hidden="true"></a>                     <span class="dt">trade_usd_5 =</span> ask_<span class="dv">5</span>_price <span class="op">*</span><span class="st"> </span>ask_<span class="dv">5</span>_quantity)</span></code></pre></div>
<p>We can look at an example [ADD HERE]</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-prep.html#cb10-1" aria-hidden="true"></a><span class="kw">head</span>(<span class="kw">select</span>(cryptodata, symbol, date_time_utc, ask_<span class="dv">1</span>_price, ask_<span class="dv">1</span>_quantity, trade_usd_<span class="dv">1</span>))</span></code></pre></div>
<pre><code>## [90m# A tibble: 6 x 5[39m
##   symbol date_time_utc       ask_1_price ask_1_quantity trade_usd_1
##   [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;dttm&gt;[39m[23m                    [3m[90m&lt;dbl&gt;[39m[23m          [3m[90m&lt;dbl&gt;[39m[23m       [3m[90m&lt;dbl&gt;[39m[23m
## [90m1[39m BTC    2020-10-27 [90m00:00:00[39m   [4m1[24m[4m3[24m053.            0.025[4m3[24m       330. 
## [90m2[39m ETH    2020-10-27 [90m00:00:01[39m     393.            0.4          157. 
## [90m3[39m EOS    2020-10-27 [90m00:00:01[39m       2.63        600           [4m1[24m577. 
## [90m4[39m LTC    2020-10-27 [90m00:00:02[39m      56.8          60           [4m3[24m408. 
## [90m5[39m BSV    2020-10-27 [90m00:00:03[39m     174.            0.6          104. 
## [90m6[39m ADA    2020-10-27 [90m00:00:04[39m       0.103       775             79.9</code></pre>
<p>If none of the top 5 orders on the order book ask side are for at least $15, exclude the row. [ADD HERE]</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-prep.html#cb12-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">mutate</span>(cryptodata, </span>
<span id="cb12-2"><a href="data-prep.html#cb12-2" aria-hidden="true"></a>                     <span class="dt">price_usd =</span> <span class="kw">case_when</span>(</span>
<span id="cb12-3"><a href="data-prep.html#cb12-3" aria-hidden="true"></a>                       cryptodata<span class="op">$</span>trade_usd_<span class="dv">1</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span> <span class="op">~</span><span class="st"> </span>cryptodata<span class="op">$</span>ask_<span class="dv">1</span>_price,</span>
<span id="cb12-4"><a href="data-prep.html#cb12-4" aria-hidden="true"></a>                       cryptodata<span class="op">$</span>trade_usd_<span class="dv">2</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span> <span class="op">~</span><span class="st"> </span>cryptodata<span class="op">$</span>ask_<span class="dv">2</span>_price,</span>
<span id="cb12-5"><a href="data-prep.html#cb12-5" aria-hidden="true"></a>                       cryptodata<span class="op">$</span>trade_usd_<span class="dv">3</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span> <span class="op">~</span><span class="st"> </span>cryptodata<span class="op">$</span>ask_<span class="dv">3</span>_price,</span>
<span id="cb12-6"><a href="data-prep.html#cb12-6" aria-hidden="true"></a>                       cryptodata<span class="op">$</span>trade_usd_<span class="dv">4</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span> <span class="op">~</span><span class="st"> </span>cryptodata<span class="op">$</span>ask_<span class="dv">4</span>_price,</span>
<span id="cb12-7"><a href="data-prep.html#cb12-7" aria-hidden="true"></a>                       cryptodata<span class="op">$</span>trade_usd_<span class="dv">5</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span> <span class="op">~</span><span class="st"> </span>cryptodata<span class="op">$</span>ask_<span class="dv">5</span>_price))</span></code></pre></div>
<p>Now remove rows where we couldn’t find a price above $15 for any of the 5 cheapest orders in the order book.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-prep.html#cb13-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">na.omit</span>(cryptodata)</span></code></pre></div>
<p>This step removed 20824 rows on the latest run.</p>
</div>
<div id="clean-data-by-group" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Clean Data by Group</h2>
<p>[ADD HERE]</p>
<p>…<code>group_by()</code> from the <code>dplyr</code> <span class="citation">(Wickham et al. <a href="#ref-R-dplyr" role="doc-biblioref">2020</a>)</span> package…</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-prep.html#cb14-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">group_by</span>(cryptodata, symbol)</span></code></pre></div>
<div id="remove-symbols-without-enough-rows" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Remove symbols without enough rows</h3>
<p>[ADD HERE]</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-prep.html#cb15-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(cryptodata, <span class="kw">n</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">700</span>)</span></code></pre></div>
<p>The number of rows for the <code>cryptodata</code> dataset before the filtering step was 177659 and is now 151000.</p>
</div>
<div id="remove-symbols-without-data-from-the-last-3-days" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Remove symbols without data from the last 3 days</h3>
<p>If there was no data collected for a cryptocurrency over the last 3 day period, let’s exclude that asset from the dataset since we are only looking to model data that is currently flowing through the process. If an asset is removed from the exchange (if a project is a scam for example) or is no longer being actively captured by the data collection process, we can’t make new predictions for it, so might as well exclude these ahead of time as well.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-prep.html#cb16-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(cryptodata, <span class="kw">max</span>(date) <span class="op">&gt;</span><span class="st"> </span><span class="kw">Sys.Date</span>()<span class="op">-</span><span class="dv">3</span>)</span></code></pre></div>
<p>The number of rows for the <code>cryptodata</code> dataset before this filtering step was 151000 and is now 110001.</p>
</div>
</div>
<div id="calculate-target" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Calculate Target</h2>
<p>[TODO - ADD HERE]</p>
<div id="any-gaps" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Any gaps?</h3>
<p>[TODO - ADD HERE]</p>
</div>
<div id="convert-to-tsibble" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Convert to tsibble</h3>
<p>… the <code>tsibble</code> package <span class="citation">(Wang et al. <a href="#ref-R-tsibble" role="doc-biblioref">2020</a>)</span>…</p>
<div id="convert-to-hourly-data-and-get-rid-of-minutes-and-seconds" class="section level4" number="4.4.2.1">
<h4><span class="header-section-number">4.4.2.1</span> Convert to hourly data and get rid of minutes and seconds</h4>
<p>… <code>anytime()</code> from the <code>anytime</code> package <span class="citation">(Eddelbuettel <a href="#ref-R-anytime" role="doc-biblioref">2020</a>)</span>…</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-prep.html#cb17-1" aria-hidden="true"></a>cryptodata<span class="op">$</span>ts_index &lt;-<span class="st"> </span><span class="kw">anytime</span>(<span class="kw">paste0</span>(cryptodata<span class="op">$</span>pkDummy,<span class="st">&#39;:00:00&#39;</span>)) </span></code></pre></div>
<p>… <code>distinct()</code> from the <code>dplyr</code> package <span class="citation">(Wickham et al. <a href="#ref-R-dplyr" role="doc-biblioref">2020</a>)</span>…</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-prep.html#cb18-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">distinct</span>(cryptodata, symbol, ts_index, <span class="dt">.keep_all=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p>… <code>as_tsibble()</code> from the <code>tsibble</code> package <span class="citation">(Wang et al. <a href="#ref-R-tsibble" role="doc-biblioref">2020</a>)</span>…</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-prep.html#cb19-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">as_tsibble</span>(cryptodata, <span class="dt">index=</span>ts_index, <span class="dt">key=</span>symbol)</span></code></pre></div>
</div>
</div>
<div id="scan-gaps" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Scan gaps</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-prep.html#cb20-1" aria-hidden="true"></a><span class="kw">scan_gaps</span>(cryptodata)</span></code></pre></div>
<pre><code>## [90m# A tsibble: 21,583 x 2 [1h] &lt;UTC&gt;[39m
## [90m# Key:       symbol [90][39m
##    symbol ts_index           
##    [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;dttm&gt;[39m[23m             
## [90m 1[39m ACAT   2020-08-13 [90m22:00:00[39m
## [90m 2[39m ACAT   2020-08-14 [90m20:00:00[39m
## [90m 3[39m ACAT   2020-08-14 [90m21:00:00[39m
## [90m 4[39m ACAT   2020-08-14 [90m22:00:00[39m
## [90m 5[39m ACAT   2020-08-15 [90m01:00:00[39m
## [90m 6[39m ACAT   2020-08-15 [90m02:00:00[39m
## [90m 7[39m ACAT   2020-08-15 [90m03:00:00[39m
## [90m 8[39m ACAT   2020-08-15 [90m04:00:00[39m
## [90m 9[39m ACAT   2020-08-15 [90m05:00:00[39m
## [90m10[39m ACAT   2020-08-15 [90m06:00:00[39m
## [90m# … with 21,573 more rows[39m</code></pre>
</div>
<div id="fill-gaps" class="section level3" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Fill gaps</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-prep.html#cb22-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">fill_gaps</span>(cryptodata)</span></code></pre></div>
<p>Now looking at the data again, there are 21583 additional rows that were added as implicitly missing in the data:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-prep.html#cb23-1" aria-hidden="true"></a>cryptodata</span></code></pre></div>
<pre><code>## [90m# A tsibble: 131,381 x 34 [1h] &lt;UTC&gt;[39m
## [90m# Key:       symbol [90][39m
## [90m# Groups:    symbol [90][39m
##    pair  symbol quote_currency ask_1_price ask_1_quantity ask_2_price
##    [3m[90m&lt;chr&gt;[39m[23m [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;chr&gt;[39m[23m                [3m[90m&lt;dbl&gt;[39m[23m          [3m[90m&lt;dbl&gt;[39m[23m       [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m 2[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m 3[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m 4[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m 5[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m 6[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m 7[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m 8[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m 9[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m10[39m ACAT… ACAT   USD                0.000[4m1[24m[4m9[24m         [4m1[24m[4m1[24m[4m8[24m300     0.000[4m2[24m[4m2[24m
## [90m# … with 131,371 more rows, and 28 more variables: ask_2_quantity [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   ask_3_price [3m[90m&lt;dbl&gt;[90m[23m, ask_3_quantity [3m[90m&lt;dbl&gt;[90m[23m, ask_4_price [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   ask_4_quantity [3m[90m&lt;dbl&gt;[90m[23m, ask_5_price [3m[90m&lt;dbl&gt;[90m[23m, ask_5_quantity [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   bid_1_price [3m[90m&lt;dbl&gt;[90m[23m, bid_1_quantity [3m[90m&lt;dbl&gt;[90m[23m, bid_2_price [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   bid_2_quantity [3m[90m&lt;dbl&gt;[90m[23m, bid_3_price [3m[90m&lt;dbl&gt;[90m[23m, bid_3_quantity [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   bid_4_price [3m[90m&lt;dbl&gt;[90m[23m, bid_4_quantity [3m[90m&lt;dbl&gt;[90m[23m, bid_5_price [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   bid_5_quantity [3m[90m&lt;dbl&gt;[90m[23m, date_time_utc [3m[90m&lt;dttm&gt;[90m[23m, date [3m[90m&lt;date&gt;[90m[23m, pkDummy [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   pkey [3m[90m&lt;chr&gt;[90m[23m, trade_usd_1 [3m[90m&lt;dbl&gt;[90m[23m, trade_usd_2 [3m[90m&lt;dbl&gt;[90m[23m, trade_usd_3 [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   trade_usd_4 [3m[90m&lt;dbl&gt;[90m[23m, trade_usd_5 [3m[90m&lt;dbl&gt;[90m[23m, price_usd [3m[90m&lt;dbl&gt;[90m[23m, ts_index [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
<p>For now, let’s convert the data back to a <code>tibble</code> instead of a <code>tsibble</code>:
<!-- [TODO - EXPLAIN THIS - GROUPINGS NOT BY TIME, BUT BY SYMBOL] --></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-prep.html#cb25-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">group_by</span>(<span class="kw">as_tibble</span>(cryptodata), symbol)</span></code></pre></div>
</div>
<div id="calculate-target-1" class="section level3" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Calculate Target</h3>
<p>[ADD HERE]</p>
<p>Also adding lagged variables here! [ADD HERE]</p>
<p>…<code>mutate()</code> from the <code>dplyr</code> <span class="citation">(Wickham et al. <a href="#ref-R-dplyr" role="doc-biblioref">2020</a>)</span> package…</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-prep.html#cb26-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">mutate</span>(cryptodata, </span>
<span id="cb26-2"><a href="data-prep.html#cb26-2" aria-hidden="true"></a>                     <span class="dt">target_price_24h =</span> <span class="kw">lead</span>(price_usd, <span class="dv">24</span>, <span class="dt">order_by=</span>ts_index),</span>
<span id="cb26-3"><a href="data-prep.html#cb26-3" aria-hidden="true"></a>                     <span class="co"># Now all the lagged variables:</span></span>
<span id="cb26-4"><a href="data-prep.html#cb26-4" aria-hidden="true"></a>                     <span class="dt">lagged_price_1h  =</span> <span class="kw">lag</span>(price_usd, <span class="dv">1</span>, <span class="dt">order_by=</span>ts_index),</span>
<span id="cb26-5"><a href="data-prep.html#cb26-5" aria-hidden="true"></a>                     <span class="dt">lagged_price_2h  =</span> <span class="kw">lag</span>(price_usd, <span class="dv">2</span>, <span class="dt">order_by=</span>ts_index),</span>
<span id="cb26-6"><a href="data-prep.html#cb26-6" aria-hidden="true"></a>                     <span class="dt">lagged_price_3h  =</span> <span class="kw">lag</span>(price_usd, <span class="dv">3</span>, <span class="dt">order_by=</span>ts_index),</span>
<span id="cb26-7"><a href="data-prep.html#cb26-7" aria-hidden="true"></a>                     <span class="dt">lagged_price_6h  =</span> <span class="kw">lag</span>(price_usd, <span class="dv">6</span>, <span class="dt">order_by=</span>ts_index),</span>
<span id="cb26-8"><a href="data-prep.html#cb26-8" aria-hidden="true"></a>                     <span class="dt">lagged_price_12h =</span> <span class="kw">lag</span>(price_usd, <span class="dv">12</span>, <span class="dt">order_by=</span>ts_index),</span>
<span id="cb26-9"><a href="data-prep.html#cb26-9" aria-hidden="true"></a>                     <span class="dt">lagged_price_24h =</span> <span class="kw">lag</span>(price_usd, <span class="dv">24</span>, <span class="dt">order_by=</span>ts_index))</span>
<span id="cb26-10"><a href="data-prep.html#cb26-10" aria-hidden="true"></a>                     <span class="co">#lagged_price_3d  = lag(price_usd, 24*3, order_by=ts_index),</span></span>
<span id="cb26-11"><a href="data-prep.html#cb26-11" aria-hidden="true"></a>                     <span class="co">#lagged_price_7d  = lag(price_usd, 24*7, order_by=ts_index),</span></span>
<span id="cb26-12"><a href="data-prep.html#cb26-12" aria-hidden="true"></a>                     <span class="co">#lagged_price_14d = lag(price_usd, 24*14, order_by=ts_index),</span></span>
<span id="cb26-13"><a href="data-prep.html#cb26-13" aria-hidden="true"></a>                     <span class="co">#lagged_price_31d = lag(price_usd, 24*31, order_by=ts_index))</span></span></code></pre></div>
<p>Here is an example showing the results for the subset of data related to the Ethereum cryptocurrency (using <code>symbol == 'ETH'</code>) showing 30 rows and the relevant columns we just calculated:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-prep.html#cb27-1" aria-hidden="true"></a><span class="kw">print</span>(<span class="kw">select</span>(<span class="kw">filter</span>(cryptodata, symbol <span class="op">==</span><span class="st"> &#39;ETH&#39;</span>),ts_index, price_usd, lagged_price_1h, lagged_price_24h, target_price_24h), <span class="dt">n=</span><span class="dv">30</span>)</span></code></pre></div>
<pre><code>## [90m# A tibble: 1,159 x 6[39m
## [90m# Groups:   symbol [1][39m
##    symbol ts_index            price_usd lagged_price_1h lagged_price_24h
##    [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;dttm&gt;[39m[23m                  [3m[90m&lt;dbl&gt;[39m[23m           [3m[90m&lt;dbl&gt;[39m[23m            [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m ETH    2020-09-09 [90m11:00:00[39m      347.             [31mNA[39m               [31mNA[39m 
## [90m 2[39m ETH    2020-09-09 [90m12:00:00[39m      348.            347.              [31mNA[39m 
## [90m 3[39m ETH    2020-09-09 [90m13:00:00[39m      347.            348.              [31mNA[39m 
## [90m 4[39m ETH    2020-09-09 [90m14:00:00[39m      348.            347.              [31mNA[39m 
## [90m 5[39m ETH    2020-09-09 [90m15:00:00[39m      353.            348.              [31mNA[39m 
## [90m 6[39m ETH    2020-09-09 [90m16:00:00[39m      353.            353.              [31mNA[39m 
## [90m 7[39m ETH    2020-09-09 [90m17:00:00[39m      351.            353.              [31mNA[39m 
## [90m 8[39m ETH    2020-09-09 [90m18:00:00[39m      352.            351.              [31mNA[39m 
## [90m 9[39m ETH    2020-09-09 [90m19:00:00[39m      359.            352.              [31mNA[39m 
## [90m10[39m ETH    2020-09-09 [90m20:00:00[39m      356.            359.              [31mNA[39m 
## [90m11[39m ETH    2020-09-09 [90m21:00:00[39m      353.            356.              [31mNA[39m 
## [90m12[39m ETH    2020-09-09 [90m22:00:00[39m      353.            353.              [31mNA[39m 
## [90m13[39m ETH    2020-09-09 [90m23:00:00[39m      355.            353.              [31mNA[39m 
## [90m14[39m ETH    2020-09-10 [90m00:00:00[39m      351.            355.              [31mNA[39m 
## [90m15[39m ETH    2020-09-10 [90m01:00:00[39m      355.            351.              [31mNA[39m 
## [90m16[39m ETH    2020-09-10 [90m02:00:00[39m      368.            355.              [31mNA[39m 
## [90m17[39m ETH    2020-09-10 [90m03:00:00[39m      367.            368.              [31mNA[39m 
## [90m18[39m ETH    2020-09-10 [90m04:00:00[39m      371.            367.              [31mNA[39m 
## [90m19[39m ETH    2020-09-10 [90m05:00:00[39m      373.            371.              [31mNA[39m 
## [90m20[39m ETH    2020-09-10 [90m06:00:00[39m      370.            373.              [31mNA[39m 
## [90m21[39m ETH    2020-09-10 [90m07:00:00[39m      367.            370.              [31mNA[39m 
## [90m22[39m ETH    2020-09-10 [90m08:00:00[39m      363.            367.              [31mNA[39m 
## [90m23[39m ETH    2020-09-10 [90m09:00:00[39m      364.            363.              [31mNA[39m 
## [90m24[39m ETH    2020-09-10 [90m10:00:00[39m      365.            364.              [31mNA[39m 
## [90m25[39m ETH    2020-09-10 [90m11:00:00[39m      363.            365.             347.
## [90m26[39m ETH    2020-09-10 [90m12:00:00[39m      365.            363.             348.
## [90m27[39m ETH    2020-09-10 [90m13:00:00[39m      372.            365.             347.
## [90m28[39m ETH    2020-09-10 [90m14:00:00[39m      377.            372.             348.
## [90m29[39m ETH    2020-09-10 [90m15:00:00[39m      367.            377.             353.
## [90m30[39m ETH    2020-09-10 [90m16:00:00[39m      372.            367.             353.
## [90m# … with 1,129 more rows, and 1 more variable: target_price_24h [3m[90m&lt;dbl&gt;[90m[23m[39m</code></pre>
<p>The field <code>target_price_24h</code> shows the value of <code>price_usd</code> 24 hours into the future relative to the row of data. All the <code>lagged_</code> fields show the price from the past relative to when the data was collected (where <code>lagged_price_1h</code> shows the price 1 hour before the <code>ts_index</code> timestamp of the data).</p>
</div>
</div>
<div id="cross-validation" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Cross Validation</h2>
<p>[ADD HERE]</p>
<p>(explain step below)</p>
<!-- [TODO - Here will also need to explain that we are taking this process very step by step and focusing on doing this correctly, but in a tool used later on to make models (caret) this functionality is available without having to set this up, so don't worry about this being hard-coded to our specific needs.] -->
<!-- [TODO - ^ OR might be a good opportunity to explain how to write a function] -->
<p>NEW CV METHOD - need to explain:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-prep.html#cb29-1" aria-hidden="true"></a><span class="co"># Remove rows with null date_time_utc to exclude missing data from next steps</span></span>
<span id="cb29-2"><a href="data-prep.html#cb29-2" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">drop_na</span>(cryptodata, date_time_utc)</span>
<span id="cb29-3"><a href="data-prep.html#cb29-3" aria-hidden="true"></a><span class="co"># Counts by symbol</span></span>
<span id="cb29-4"><a href="data-prep.html#cb29-4" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span>cryptodata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(symbol) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">tot_rows =</span> <span class="kw">n</span>())</span>
<span id="cb29-5"><a href="data-prep.html#cb29-5" aria-hidden="true"></a><span class="co"># Add row index by symbol</span></span>
<span id="cb29-6"><a href="data-prep.html#cb29-6" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">mutate</span>(<span class="kw">arrange</span>(cryptodata, date_time_utc), <span class="dt">row_id =</span> <span class="kw">seq_along</span>(date_time_utc))</span>
<span id="cb29-7"><a href="data-prep.html#cb29-7" aria-hidden="true"></a><span class="co"># Calculate what rows belong in the first split</span></span>
<span id="cb29-8"><a href="data-prep.html#cb29-8" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span>cryptodata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">split_rows_1 =</span> <span class="kw">as.integer</span>(<span class="kw">n</span>()<span class="op">/</span><span class="dv">5</span>),</span>
<span id="cb29-9"><a href="data-prep.html#cb29-9" aria-hidden="true"></a>                                    <span class="dt">split_rows_2 =</span> <span class="kw">as.integer</span>(split_rows_<span class="dv">1</span><span class="op">*</span><span class="dv">2</span>),</span>
<span id="cb29-10"><a href="data-prep.html#cb29-10" aria-hidden="true"></a>                                    <span class="dt">split_rows_3 =</span> <span class="kw">as.integer</span>(split_rows_<span class="dv">1</span><span class="op">*</span><span class="dv">3</span>),</span>
<span id="cb29-11"><a href="data-prep.html#cb29-11" aria-hidden="true"></a>                                    <span class="dt">split_rows_4 =</span> <span class="kw">as.integer</span>(split_rows_<span class="dv">1</span><span class="op">*</span><span class="dv">4</span>),</span>
<span id="cb29-12"><a href="data-prep.html#cb29-12" aria-hidden="true"></a>                                    <span class="dt">split_rows_5 =</span> <span class="kw">as.integer</span>(split_rows_<span class="dv">1</span><span class="op">*</span><span class="dv">5</span>))</span>
<span id="cb29-13"><a href="data-prep.html#cb29-13" aria-hidden="true"></a><span class="co"># Now calculate what split the current row_id belongs into</span></span>
<span id="cb29-14"><a href="data-prep.html#cb29-14" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">mutate</span>(cryptodata, </span>
<span id="cb29-15"><a href="data-prep.html#cb29-15" aria-hidden="true"></a>                     <span class="dt">split =</span> <span class="kw">case_when</span>(</span>
<span id="cb29-16"><a href="data-prep.html#cb29-16" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>split_rows_<span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb29-17"><a href="data-prep.html#cb29-17" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>split_rows_<span class="dv">2</span> <span class="op">~</span><span class="st"> </span><span class="dv">2</span>,</span>
<span id="cb29-18"><a href="data-prep.html#cb29-18" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>split_rows_<span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">3</span>,</span>
<span id="cb29-19"><a href="data-prep.html#cb29-19" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>split_rows_<span class="dv">4</span> <span class="op">~</span><span class="st"> </span><span class="dv">4</span>,</span>
<span id="cb29-20"><a href="data-prep.html#cb29-20" aria-hidden="true"></a>                       row_id <span class="op">&gt;</span><span class="st"> </span>split_rows_<span class="dv">4</span> <span class="op">~</span><span class="st"> </span><span class="dv">5</span>))</span>
<span id="cb29-21"><a href="data-prep.html#cb29-21" aria-hidden="true"></a><span class="co"># Now figure out train/test groups</span></span>
<span id="cb29-22"><a href="data-prep.html#cb29-22" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span>cryptodata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">train_rows_1 =</span> (<span class="kw">as.integer</span>(<span class="kw">n</span>()<span class="op">/</span><span class="dv">5</span>))<span class="op">*</span><span class="fl">0.8</span>,</span>
<span id="cb29-23"><a href="data-prep.html#cb29-23" aria-hidden="true"></a>                                    <span class="dt">test_rows_1  =</span> train_rows_<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="kw">as.integer</span>(<span class="kw">n</span>()<span class="op">/</span><span class="dv">5</span>))<span class="op">*</span><span class="fl">0.2</span>,</span>
<span id="cb29-24"><a href="data-prep.html#cb29-24" aria-hidden="true"></a>                                    <span class="dt">train_rows_2 =</span> test_rows_<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>train_rows_<span class="dv">1</span>,</span>
<span id="cb29-25"><a href="data-prep.html#cb29-25" aria-hidden="true"></a>                                    <span class="dt">test_rows_2  =</span> train_rows_<span class="dv">2</span> <span class="op">+</span><span class="st"> </span>(<span class="kw">as.integer</span>(<span class="kw">n</span>()<span class="op">/</span><span class="dv">5</span>))<span class="op">*</span><span class="fl">0.2</span>,</span>
<span id="cb29-26"><a href="data-prep.html#cb29-26" aria-hidden="true"></a>                                    <span class="dt">train_rows_3 =</span> test_rows_<span class="dv">2</span> <span class="op">+</span><span class="st"> </span>train_rows_<span class="dv">1</span>,</span>
<span id="cb29-27"><a href="data-prep.html#cb29-27" aria-hidden="true"></a>                                    <span class="dt">test_rows_3  =</span> train_rows_<span class="dv">3</span> <span class="op">+</span><span class="st"> </span>(<span class="kw">as.integer</span>(<span class="kw">n</span>()<span class="op">/</span><span class="dv">5</span>))<span class="op">*</span><span class="fl">0.2</span>,</span>
<span id="cb29-28"><a href="data-prep.html#cb29-28" aria-hidden="true"></a>                                    <span class="dt">train_rows_4 =</span> test_rows_<span class="dv">3</span> <span class="op">+</span><span class="st"> </span>train_rows_<span class="dv">1</span>,</span>
<span id="cb29-29"><a href="data-prep.html#cb29-29" aria-hidden="true"></a>                                    <span class="dt">test_rows_4  =</span> train_rows_<span class="dv">4</span> <span class="op">+</span><span class="st"> </span>(<span class="kw">as.integer</span>(<span class="kw">n</span>()<span class="op">/</span><span class="dv">5</span>))<span class="op">*</span><span class="fl">0.2</span>,</span>
<span id="cb29-30"><a href="data-prep.html#cb29-30" aria-hidden="true"></a>                                    <span class="dt">train_rows_5 =</span> test_rows_<span class="dv">4</span> <span class="op">+</span><span class="st"> </span>train_rows_<span class="dv">1</span>,</span>
<span id="cb29-31"><a href="data-prep.html#cb29-31" aria-hidden="true"></a>                                    <span class="dt">test_rows_5  =</span> train_rows_<span class="dv">5</span> <span class="op">+</span><span class="st"> </span>(<span class="kw">as.integer</span>(<span class="kw">n</span>()<span class="op">/</span><span class="dv">5</span>))<span class="op">*</span><span class="fl">0.2</span>)</span>
<span id="cb29-32"><a href="data-prep.html#cb29-32" aria-hidden="true"></a><span class="co"># Now assign train/test groups</span></span>
<span id="cb29-33"><a href="data-prep.html#cb29-33" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">mutate</span>(cryptodata, </span>
<span id="cb29-34"><a href="data-prep.html#cb29-34" aria-hidden="true"></a>                     <span class="dt">training =</span> <span class="kw">case_when</span>(</span>
<span id="cb29-35"><a href="data-prep.html#cb29-35" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>train_rows_<span class="dv">1</span> <span class="op">~</span><span class="st"> &#39;train&#39;</span>,</span>
<span id="cb29-36"><a href="data-prep.html#cb29-36" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>test_rows_<span class="dv">1</span> <span class="op">~</span><span class="st"> &#39;test&#39;</span>,</span>
<span id="cb29-37"><a href="data-prep.html#cb29-37" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>train_rows_<span class="dv">2</span> <span class="op">~</span><span class="st"> &#39;train&#39;</span>,</span>
<span id="cb29-38"><a href="data-prep.html#cb29-38" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>test_rows_<span class="dv">2</span> <span class="op">~</span><span class="st"> &#39;test&#39;</span>,</span>
<span id="cb29-39"><a href="data-prep.html#cb29-39" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>train_rows_<span class="dv">3</span> <span class="op">~</span><span class="st"> &#39;train&#39;</span>,</span>
<span id="cb29-40"><a href="data-prep.html#cb29-40" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>test_rows_<span class="dv">3</span> <span class="op">~</span><span class="st"> &#39;test&#39;</span>,</span>
<span id="cb29-41"><a href="data-prep.html#cb29-41" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>train_rows_<span class="dv">4</span> <span class="op">~</span><span class="st"> &#39;train&#39;</span>,</span>
<span id="cb29-42"><a href="data-prep.html#cb29-42" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>test_rows_<span class="dv">4</span> <span class="op">~</span><span class="st"> &#39;test&#39;</span>,</span>
<span id="cb29-43"><a href="data-prep.html#cb29-43" aria-hidden="true"></a>                       row_id <span class="op">&lt;=</span><span class="st"> </span>train_rows_<span class="dv">5</span> <span class="op">~</span><span class="st"> &#39;train&#39;</span>,</span>
<span id="cb29-44"><a href="data-prep.html#cb29-44" aria-hidden="true"></a>                       row_id <span class="op">&gt;</span><span class="st"> </span>train_rows_<span class="dv">5</span> <span class="op">~</span><span class="st"> &#39;holdout&#39;</span>))</span>
<span id="cb29-45"><a href="data-prep.html#cb29-45" aria-hidden="true"></a><span class="co"># Remove all columns that are no longer needed now</span></span>
<span id="cb29-46"><a href="data-prep.html#cb29-46" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">select</span>(cryptodata, <span class="op">-</span>(tot_rows<span class="op">:</span>test_rows_<span class="dv">5</span>), <span class="op">-</span>(trade_usd_<span class="dv">1</span><span class="op">:</span>trade_usd_<span class="dv">5</span>),</span>
<span id="cb29-47"><a href="data-prep.html#cb29-47" aria-hidden="true"></a>                     <span class="op">-</span>(ask_<span class="dv">1</span>_price<span class="op">:</span>bid_<span class="dv">5</span>_quantity), <span class="op">-</span>pair, <span class="op">-</span>quote_currency, </span>
<span id="cb29-48"><a href="data-prep.html#cb29-48" aria-hidden="true"></a>                     <span class="op">-</span>pkDummy, <span class="op">-</span>pkey, <span class="op">-</span>ts_index, split)</span></code></pre></div>
<p>Our data now has the new columns <code>training</code> (<em>train</em>, <em>test</em> or <em>holdout</em>) and <code>split</code> (numbers 1-5) added to it, let’s take a look at the new columns:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-prep.html#cb30-1" aria-hidden="true"></a><span class="kw">select</span>(cryptodata, training, split)</span></code></pre></div>
<pre><code>## [90m# A tibble: 109,798 x 3[39m
## [90m# Groups:   symbol [90][39m
##    symbol training split
##    [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;chr&gt;[39m[23m    [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m LEO    train        1
## [90m 2[39m GBX    train        1
## [90m 3[39m ACT    train        1
## [90m 4[39m BTG    train        1
## [90m 5[39m ACAT   train        1
## [90m 6[39m LINK   train        1
## [90m 7[39m VET    train        1
## [90m 8[39m IHF    train        1
## [90m 9[39m DGB    train        1
## [90m10[39m RCN    train        1
## [90m# … with 109,788 more rows[39m</code></pre>
<p><em>Notice that even though we left <code>symbol</code> variables out of our selection, because it is part of the way we grouped our data, it was added back in with the message “Adding missing grouping variables <code>symbol</code>”. The data is tied to its groupings when performing all operations until we use <code>ungroup()</code> to undo them.</em></p>
<p>Let’s add the new <code>split</code> column to the way the data is grouped:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-prep.html#cb32-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">group_by</span>(cryptodata, symbol, split)</span></code></pre></div>
<p>The new field <code>split</code>, helps us split the data into 5 different datasets based on the date, and contains a number from 1-5. The new field <code>training</code> flags the data as being part of the <strong><em>train</em></strong> dataset, or the <strong><em>test</em></strong> (or <strong><em>holdout</em></strong> for the first split) dataset for each of the 5 splits/datasets.</p>
<p>Running the same code as before with <code>tail()</code> added, we should see rows associated with the test data of the 5th split (again remember, each of the 5 splits has a training and testing dataset):</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-prep.html#cb33-1" aria-hidden="true"></a><span class="kw">tail</span>( <span class="kw">select</span>(cryptodata, training, split) )</span></code></pre></div>
<pre><code>## [90m# A tibble: 6 x 3[39m
## [90m# Groups:   symbol, split [6][39m
##   symbol training split
##   [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;chr&gt;[39m[23m    [3m[90m&lt;dbl&gt;[39m[23m
## [90m1[39m REP    holdout      5
## [90m2[39m BYTZ   holdout      5
## [90m3[39m DAY    holdout      5
## [90m4[39m NUT    holdout      5
## [90m5[39m UTT    holdout      5
## [90m6[39m DCN    holdout      5</code></pre>
<p>The easiest way to understand these groupings, is to visualize them. In the next section, you will learn powerful tools for visualizing data in R. Do not worry if you do not understand the code below and are not familiar with <code>ggplot()</code>, we will explain this framework in the <a href="visualization.html#visualization">next section</a>, for now review the charts below and try to follow along with the way we are grouping the data for the predictive models by looking at what the x and y axis represent, as well as the colors. On the x-axis we are plotting the DateTime of when a data point was collected, and on the y-axis the <code>split</code> (1-5) as described in this section. The data is then colored based on the category assigned for the <code>training</code> variable (“train”,“test” or “holdout”).</p>
<p>We can visualize the new grouping variables:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-prep.html#cb35-1" aria-hidden="true"></a>groups_chart &lt;-<span class="st"> </span><span class="kw">ggplot</span>(cryptodata,</span>
<span id="cb35-2"><a href="data-prep.html#cb35-2" aria-hidden="true"></a>                       <span class="kw">aes</span>(<span class="dt">x =</span> date_time_utc, <span class="dt">y =</span> split, <span class="dt">color =</span> training)) <span class="op">+</span></span>
<span id="cb35-3"><a href="data-prep.html#cb35-3" aria-hidden="true"></a><span class="st">                       </span><span class="kw">geom_point</span>() <span class="co">#+</span></span>
<span id="cb35-4"><a href="data-prep.html#cb35-4" aria-hidden="true"></a>                       <span class="co">#scale_y_reverse()</span></span>
<span id="cb35-5"><a href="data-prep.html#cb35-5" aria-hidden="true"></a><span class="co"># now show the chart we just saved:</span></span>
<span id="cb35-6"><a href="data-prep.html#cb35-6" aria-hidden="true"></a>groups_chart</span></code></pre></div>
<p><img src="CryptoResearchPaper_files/figure-html/cv_groupings_visualized-1.png" width="672" /></p>
<p>We can check on the groupings for each cryptocurrency by animating the previous chart:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-prep.html#cb36-1" aria-hidden="true"></a><span class="kw">library</span>(gganimate)</span>
<span id="cb36-2"><a href="data-prep.html#cb36-2" aria-hidden="true"></a>animated_chart &lt;-<span class="st"> </span>groups_chart <span class="op">+</span></span>
<span id="cb36-3"><a href="data-prep.html#cb36-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">transition_states</span>(symbol) <span class="op">+</span></span>
<span id="cb36-4"><a href="data-prep.html#cb36-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&#39;Now showing: {closest_state}&#39;</span>)</span>
<span id="cb36-5"><a href="data-prep.html#cb36-5" aria-hidden="true"></a><span class="co"># show the new animated chart</span></span>
<span id="cb36-6"><a href="data-prep.html#cb36-6" aria-hidden="true"></a><span class="kw">animate</span>(animated_chart, <span class="dt">fps =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="CryptoResearchPaper_files/figure-html/animate_groupings-1.gif" /><!-- --></p>
<p>If/when need to slow these down, use this code: (can’t change fps from 1 - or at least be careful, it’s error prone) animate(animated_chart, fps = 1)</p>
<p><strong><em>This is another tool that we will walk through in the <a href="visualization.html#visualization">next section</a>.</em></strong></p>
<p>It can be a bit hard to tell how many data points there are because they end up looking like lines. Let’s change the plot to use <code>geom_jitter()</code> instead of <code>geom_point()</code>, which will manually offset the points and let us see exactly how many data points there are:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-prep.html#cb37-1" aria-hidden="true"></a>animated_chart &lt;-<span class="st"> </span>animated_chart <span class="op">+</span></span>
<span id="cb37-2"><a href="data-prep.html#cb37-2" aria-hidden="true"></a><span class="st">                    </span><span class="kw">geom_jitter</span>()</span>
<span id="cb37-3"><a href="data-prep.html#cb37-3" aria-hidden="true"></a><span class="co"># show the new animated chart</span></span>
<span id="cb37-4"><a href="data-prep.html#cb37-4" aria-hidden="true"></a><span class="kw">animate</span>(animated_chart, <span class="dt">fps =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="CryptoResearchPaper_files/figure-html/gganimate_jitter-1.gif" /><!-- --></p>
</div>
<div id="fix-data-by-split" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Fix Data by Split</h2>
<p>Now that we have split the data into many different subsets, those subsets themselves may have issues that prevent the predictive models from working as expected.</p>
<div id="zero-variance" class="section level3" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Zero Variance</h3>
<p>One of the first models we will make is a simple linear model. The regular R function for this will not work if the data contains any columns that have “zero variance”, meaning the value of the column never changes throughout the data being given to the model. Therefore, let’s fix any issues relating to zero variance columns in any dataset before we change the structure of the data in the step after this one.</p>
<p>First change the grouping of the data, we are interested in calculating the zero variance based on the <code>symbol</code>, <code>split</code> and <code>training</code> fields.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-prep.html#cb38-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">group_by</span>(cryptodata, symbol, split, training)</span></code></pre></div>
<p>Now let’s create a new object called <code>find_zero_var</code> which shows the value of the minimum standard deviation across all columns and calculated based on the grouping of symbol, split and train.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-prep.html#cb39-1" aria-hidden="true"></a>find_zero_var &lt;-<span class="st"> </span><span class="kw">select</span>(<span class="kw">mutate</span>(cryptodata, <span class="dt">min_sd =</span> <span class="kw">min</span>(<span class="kw">sd</span>(price_usd, <span class="dt">na.rm=</span>T), </span>
<span id="cb39-2"><a href="data-prep.html#cb39-2" aria-hidden="true"></a>                                                        <span class="kw">sd</span>(target_price_24h, <span class="dt">na.rm=</span>T),</span>
<span id="cb39-3"><a href="data-prep.html#cb39-3" aria-hidden="true"></a>                                                        <span class="kw">sd</span>(lagged_price_1h, <span class="dt">na.rm=</span>T), </span>
<span id="cb39-4"><a href="data-prep.html#cb39-4" aria-hidden="true"></a>                                                        <span class="kw">sd</span>(lagged_price_2h, <span class="dt">na.rm=</span>T),</span>
<span id="cb39-5"><a href="data-prep.html#cb39-5" aria-hidden="true"></a>                                                        <span class="kw">sd</span>(lagged_price_3h, <span class="dt">na.rm=</span>T), </span>
<span id="cb39-6"><a href="data-prep.html#cb39-6" aria-hidden="true"></a>                                                        <span class="kw">sd</span>(lagged_price_6h, <span class="dt">na.rm=</span>T),</span>
<span id="cb39-7"><a href="data-prep.html#cb39-7" aria-hidden="true"></a>                                                        <span class="kw">sd</span>(lagged_price_12h, <span class="dt">na.rm=</span>T), </span>
<span id="cb39-8"><a href="data-prep.html#cb39-8" aria-hidden="true"></a>                                                        <span class="kw">sd</span>(lagged_price_24h, <span class="dt">na.rm=</span>T))), min_sd)</span>
<span id="cb39-9"><a href="data-prep.html#cb39-9" aria-hidden="true"></a><span class="co"># Show data</span></span>
<span id="cb39-10"><a href="data-prep.html#cb39-10" aria-hidden="true"></a>find_zero_var</span></code></pre></div>
<pre><code>## [90m# A tibble: 109,798 x 4[39m
## [90m# Groups:   symbol, split, training [900][39m
##    symbol split training    min_sd
##    [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;chr&gt;[39m[23m        [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m LEO        1 train    0.114    
## [90m 2[39m GBX        1 train    0.002[4m5[24m[4m9[24m  
## [90m 3[39m ACT        1 train    0.000[4m6[24m[4m5[24m[4m1[24m 
## [90m 4[39m BTG        1 train    0.400    
## [90m 5[39m ACAT       1 train    0.000[4m0[24m[4m1[24m[4m6[24m3
## [90m 6[39m LINK       1 train    2.04     
## [90m 7[39m VET        1 train    0.000[4m8[24m[4m5[24m[4m4[24m 
## [90m 8[39m IHF        1 train    0.003[4m2[24m[4m7[24m  
## [90m 9[39m DGB        1 train    0.002[4m0[24m[4m3[24m  
## [90m10[39m RCN        1 train    0.014[4m0[24m   
## [90m# … with 109,788 more rows[39m</code></pre>
<p>Now let’s get to a list of cryptocurrency symbols where the minimum standard deviation across all columns for all splits of the data is 0, which is the list of cryptocurrencies to remove from the data.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-prep.html#cb41-1" aria-hidden="true"></a>minimum_sd &lt;-<span class="st"> </span><span class="kw">filter</span>(<span class="kw">distinct</span>(<span class="kw">mutate</span>(<span class="kw">group_by</span>(<span class="kw">ungroup</span>(find_zero_var), symbol),</span>
<span id="cb41-2"><a href="data-prep.html#cb41-2" aria-hidden="true"></a>                                     <span class="dt">min_sd =</span> <span class="kw">min</span>(min_sd, <span class="dt">na.rm=</span>T)), min_sd),min_sd <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.000001</span>)<span class="op">$</span>symbol</span>
<span id="cb41-3"><a href="data-prep.html#cb41-3" aria-hidden="true"></a><span class="co"># Show result</span></span>
<span id="cb41-4"><a href="data-prep.html#cb41-4" aria-hidden="true"></a>minimum_sd</span></code></pre></div>
<pre><code>##  [1] &quot;LEO&quot;   &quot;GBX&quot;   &quot;ACT&quot;   &quot;ACAT&quot;  &quot;PAXG&quot;  &quot;DRT&quot;   &quot;DENT&quot;  &quot;DAY&quot;   &quot;IPL&quot;  
## [10] &quot;IHT&quot;   &quot;CDT&quot;   &quot;MESH&quot;  &quot;NAV&quot;   &quot;CUR&quot;   &quot;FDZ&quot;   &quot;COCOS&quot; &quot;HTML&quot;  &quot;REX&quot;  
## [19] &quot;SPC&quot;   &quot;OAX&quot;   &quot;CND&quot;   &quot;DCN&quot;   &quot;MG&quot;    &quot;SWM&quot;   &quot;PHX&quot;   &quot;CUTE&quot;  &quot;BCN&quot;  
## [28] &quot;ELF&quot;   &quot;BYTZ&quot;  &quot;ZAP&quot;   &quot;BNK&quot;   &quot;CHAT&quot;  &quot;WIKI&quot;  &quot;NEU&quot;   &quot;ECA&quot;   &quot;JST&quot;  
## [37] &quot;SEELE&quot;</code></pre>
<!-- [TODO - 0.0001 isn't a super perfect cutoff, small prices will have low standard deviation because not standardized, but will live with some cryptos with suuuper small prices being excluded] -->
<p>Now we can remove these symbols from appearing in the dataset:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-prep.html#cb43-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">filter</span>(cryptodata, <span class="op">!</span>(symbol <span class="op">%in%</span><span class="st"> </span>minimum_sd)) </span></code></pre></div>
<p>In the code above we match all rows where the symbol is part of the <code>minimum_sd</code> object with the list of cryptocurrency symbols to remove from the data, and we then negate the selection using the <code>!</code> operator to only keep rows with symbols not in the list we found.</p>
<!-- Ugh wish I could write it like this: -->
<!-- ```{r} -->
<!-- find_zero_var %>% #start with data -->
<!--   ungroup() %>% #ungroup -->
<!--   group_by(symbol) %>% #re-group by symbol -->
<!--   mutate(min_sd = min(min_sd)) %>% #find the minimum by the symbol -->
<!--   select(min_sd) %>% #only keep symbol and min_sd -->
<!--   distinct() #distinct  -->
<!-- ``` -->
</div>
</div>
<div id="nest-data" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Nest data</h2>
<p>[ADD HERE]</p>
<p>… explain goal and method</p>
<p>… First make sure groupings are correct</p>
<!-- [TODO - Reference Hadley's book chapter and video as references here] -->
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-prep.html#cb44-1" aria-hidden="true"></a>cryptodata &lt;-<span class="st"> </span><span class="kw">group_by</span>(cryptodata, symbol, split, training)</span></code></pre></div>
<p>Example nesting data:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-prep.html#cb45-1" aria-hidden="true"></a><span class="kw">nest</span>(cryptodata) </span></code></pre></div>
<pre><code>## [90m# A tibble: 530 x 4[39m
## [90m# Groups:   symbol, training, split [530][39m
##    symbol training split data               
##    [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;chr&gt;[39m[23m    [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;list&gt;[39m[23m             
## [90m 1[39m BTG    train        1 [90m&lt;tibble [276 × 10]&gt;[39m
## [90m 2[39m LINK   train        1 [90m&lt;tibble [203 × 10]&gt;[39m
## [90m 3[39m VET    train        1 [90m&lt;tibble [288 × 10]&gt;[39m
## [90m 4[39m IHF    train        1 [90m&lt;tibble [227 × 10]&gt;[39m
## [90m 5[39m DGB    train        1 [90m&lt;tibble [300 × 10]&gt;[39m
## [90m 6[39m RCN    train        1 [90m&lt;tibble [265 × 10]&gt;[39m
## [90m 7[39m LTC    train        1 [90m&lt;tibble [300 × 10]&gt;[39m
## [90m 8[39m NUT    train        1 [90m&lt;tibble [284 × 10]&gt;[39m
## [90m 9[39m NEXO   train        1 [90m&lt;tibble [298 × 10]&gt;[39m
## [90m10[39m XMR    train        1 [90m&lt;tibble [299 × 10]&gt;[39m
## [90m# … with 520 more rows[39m</code></pre>
<p>First make training data nested:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-prep.html#cb47-1" aria-hidden="true"></a>cryptodata_train &lt;-<span class="st"> </span><span class="kw">rename</span>(<span class="kw">nest</span>(<span class="kw">filter</span>(cryptodata, training<span class="op">==</span><span class="st">&#39;train&#39;</span>)), <span class="dt">train_data =</span> <span class="st">&#39;data&#39;</span>)</span>
<span id="cb47-2"><a href="data-prep.html#cb47-2" aria-hidden="true"></a><span class="co"># Now remove training column</span></span>
<span id="cb47-3"><a href="data-prep.html#cb47-3" aria-hidden="true"></a>cryptodata_train &lt;-<span class="st"> </span><span class="kw">select</span>(<span class="kw">ungroup</span>(cryptodata_train, training), <span class="op">-</span>training)</span>
<span id="cb47-4"><a href="data-prep.html#cb47-4" aria-hidden="true"></a><span class="co"># Fix issues with individual groups of the data</span></span>
<span id="cb47-5"><a href="data-prep.html#cb47-5" aria-hidden="true"></a>cryptodata_train<span class="op">$</span>train_data &lt;-<span class="st"> </span><span class="kw">lapply</span>(cryptodata_train<span class="op">$</span>train_data, na.omit)</span>
<span id="cb47-6"><a href="data-prep.html#cb47-6" aria-hidden="true"></a><span class="co"># Remove elements with no rows after na.omit step. CONFIRM THIS WORKS!!!</span></span>
<span id="cb47-7"><a href="data-prep.html#cb47-7" aria-hidden="true"></a><span class="co"># First add new column with nrow of train dataset</span></span>
<span id="cb47-8"><a href="data-prep.html#cb47-8" aria-hidden="true"></a>cryptodata_train &lt;-<span class="st"> </span><span class="kw">group_by</span>(<span class="kw">ungroup</span>(<span class="kw">mutate</span>(<span class="kw">rowwise</span>(cryptodata_train), <span class="dt">train_rows =</span> <span class="kw">nrow</span>(train_data))), symbol, split)</span>
<span id="cb47-9"><a href="data-prep.html#cb47-9" aria-hidden="true"></a><span class="co"># Remove all symbols where their train data has less than 20 rows at least once</span></span>
<span id="cb47-10"><a href="data-prep.html#cb47-10" aria-hidden="true"></a>symbols_rm &lt;-<span class="st"> </span><span class="kw">unique</span>(<span class="kw">filter</span>(cryptodata_train, split <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>, train_rows <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)<span class="op">$</span>symbol)</span>
<span id="cb47-11"><a href="data-prep.html#cb47-11" aria-hidden="true"></a><span class="co"># Remove all data relating to the symbols found above</span></span>
<span id="cb47-12"><a href="data-prep.html#cb47-12" aria-hidden="true"></a>cryptodata_train &lt;-<span class="st"> </span><span class="kw">filter</span>(cryptodata_train, <span class="op">!</span><span class="st"> </span>symbol <span class="op">%in%</span><span class="st"> </span>symbols_rm) <span class="co"># ! is to make %not in% operator</span></span>
<span id="cb47-13"><a href="data-prep.html#cb47-13" aria-hidden="true"></a><span class="co"># Drop train_rows column</span></span>
<span id="cb47-14"><a href="data-prep.html#cb47-14" aria-hidden="true"></a>cryptodata_train &lt;-<span class="st"> </span><span class="kw">select</span>(cryptodata_train, <span class="op">-</span>train_rows)</span></code></pre></div>
<p>Now nest test data:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-prep.html#cb48-1" aria-hidden="true"></a>cryptodata_test &lt;-<span class="st"> </span><span class="kw">select</span>(<span class="kw">rename</span>(<span class="kw">nest</span>(<span class="kw">filter</span>(cryptodata, training<span class="op">==</span><span class="st">&#39;test&#39;</span>)), <span class="dt">test_data =</span> <span class="st">&#39;data&#39;</span>), <span class="op">-</span>training)</span>
<span id="cb48-2"><a href="data-prep.html#cb48-2" aria-hidden="true"></a><span class="co"># Now remove training column</span></span>
<span id="cb48-3"><a href="data-prep.html#cb48-3" aria-hidden="true"></a>cryptodata_test &lt;-<span class="st"> </span><span class="kw">select</span>(<span class="kw">ungroup</span>(cryptodata_test, training), <span class="op">-</span>training)</span></code></pre></div>
<p>Also do holdout:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-prep.html#cb49-1" aria-hidden="true"></a>cryptodata_holdout &lt;-<span class="st"> </span><span class="kw">rename</span>(<span class="kw">nest</span>(<span class="kw">filter</span>(cryptodata, training<span class="op">==</span><span class="st">&#39;holdout&#39;</span>)), <span class="dt">holdout_data =</span> <span class="st">&#39;data&#39;</span>)</span>
<span id="cb49-2"><a href="data-prep.html#cb49-2" aria-hidden="true"></a><span class="co"># Remove split and training columns from holdout</span></span>
<span id="cb49-3"><a href="data-prep.html#cb49-3" aria-hidden="true"></a>cryptodata_holdout &lt;-<span class="st"> </span><span class="kw">select</span>(<span class="kw">ungroup</span>(cryptodata_holdout, split, training), <span class="op">-</span>split, <span class="op">-</span>training)</span></code></pre></div>
<p>Now join all nested data into the same dataframe</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data-prep.html#cb50-1" aria-hidden="true"></a><span class="co"># Join train and test</span></span>
<span id="cb50-2"><a href="data-prep.html#cb50-2" aria-hidden="true"></a>cryptodata_nested &lt;-<span class="st"> </span><span class="kw">left_join</span>(cryptodata_train, cryptodata_test,<span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;symbol&quot;</span>, <span class="st">&quot;split&quot;</span>))</span>
<span id="cb50-3"><a href="data-prep.html#cb50-3" aria-hidden="true"></a><span class="co"># Join holdout</span></span>
<span id="cb50-4"><a href="data-prep.html#cb50-4" aria-hidden="true"></a>cryptodata_nested &lt;-<span class="st"> </span><span class="kw">left_join</span>(cryptodata_nested, cryptodata_holdout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;symbol&quot;</span>))</span></code></pre></div>
<p>New data:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-prep.html#cb51-1" aria-hidden="true"></a>cryptodata_nested</span></code></pre></div>
<pre><code>## [90m# A tibble: 260 x 5[39m
## [90m# Groups:   symbol, split [260][39m
##    symbol split train_data          test_data          holdout_data      
##    [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;list&gt;[39m[23m              [3m[90m&lt;list&gt;[39m[23m             [3m[90m&lt;list&gt;[39m[23m            
## [90m 1[39m BTG        1 [90m&lt;tibble [239 × 10]&gt;[39m [90m&lt;tibble [70 × 10]&gt;[39m [90m&lt;tibble [71 × 10]&gt;[39m
## [90m 2[39m LINK       1 [90m&lt;tibble [179 × 10]&gt;[39m [90m&lt;tibble [51 × 10]&gt;[39m [90m&lt;tibble [54 × 10]&gt;[39m
## [90m 3[39m VET        1 [90m&lt;tibble [258 × 10]&gt;[39m [90m&lt;tibble [72 × 10]&gt;[39m [90m&lt;tibble [75 × 10]&gt;[39m
## [90m 4[39m IHF        1 [90m&lt;tibble [192 × 10]&gt;[39m [90m&lt;tibble [57 × 10]&gt;[39m [90m&lt;tibble [61 × 10]&gt;[39m
## [90m 5[39m DGB        1 [90m&lt;tibble [276 × 10]&gt;[39m [90m&lt;tibble [75 × 10]&gt;[39m [90m&lt;tibble [79 × 10]&gt;[39m
## [90m 6[39m RCN        1 [90m&lt;tibble [193 × 10]&gt;[39m [90m&lt;tibble [67 × 10]&gt;[39m [90m&lt;tibble [67 × 10]&gt;[39m
## [90m 7[39m LTC        1 [90m&lt;tibble [269 × 10]&gt;[39m [90m&lt;tibble [75 × 10]&gt;[39m [90m&lt;tibble [78 × 10]&gt;[39m
## [90m 8[39m NUT        1 [90m&lt;tibble [260 × 10]&gt;[39m [90m&lt;tibble [72 × 10]&gt;[39m [90m&lt;tibble [72 × 10]&gt;[39m
## [90m 9[39m NEXO       1 [90m&lt;tibble [274 × 10]&gt;[39m [90m&lt;tibble [75 × 10]&gt;[39m [90m&lt;tibble [79 × 10]&gt;[39m
## [90m10[39m XMR        1 [90m&lt;tibble [261 × 10]&gt;[39m [90m&lt;tibble [75 × 10]&gt;[39m [90m&lt;tibble [75 × 10]&gt;[39m
## [90m# … with 250 more rows[39m</code></pre>
<p>[ADD HERE - Intro to Visualization and explain we will use grouped data in PredictiveModeling]</p>
<p>[ADD HERE - Worth mentioning the fact that some data will be higher quality, etc…? Give more background on those steps as “catch-alls”?]</p>
</div>
<div id="functional-programming" class="section level2" number="4.8">
<h2><span class="header-section-number">4.8</span> Functional Programming</h2>
<p>Could work with the data using for loops, which is an “object-oriented” approach. Basically, we could take our given option, iterate through every row of the data, and perform operations on each row and subset of the data we are interested in. That is one approach, but instead we will use a different approach using a “functional programming” approach</p>
<!-- https://youtu.be/rz3_FDVt9eg?t=1407  -->
<!-- [TODO - EXPLAIN THINGS A LOT MORE HERE] -->
<!-- ### Fix Data by Split -->
<!-- Now that we have split the data into many different subsets, those subsets themselves may have issues that prevent the predictive models from working as expected. -->
<!-- #### Zero Variance -->
<!-- One of the first models we will make is a simple linear model. The regular R function for this will not work if the data contains any columns that have "zero variance", meaning the value of the column never changes throughout the data being given to the model. Therefore, let's fix the zero variance issue programmatically for the train and test data of all datasets. -->
<!-- We will use the `skimr` package that we introduced in the [previous section](#explore-data) in order to find any columns where this problem is present, and we will then use that list to remove those columns from the data. -->
<!-- First, let's get the code to work the way it should on the first nested elements of the data as an example to apply to all other nested datasets. -->
<!-- We can find columns that have at least a 98% completion rate using a combination of `skim()` and `filter()`: -->
<!-- ```{r} -->
<!-- filter(skim(cryptodata_nested$train_data[[1]]), complete_rate > 0.02) -->
<!-- ``` -->
<!-- And extract the variable names by adding `$skim_variable` to the end of the result to return the results for that column only since that is what we are interested in. We will save the result in the object `example_variables` so we can use it in the next step. -->
<!-- ```{r} -->
<!-- example_variables <- filter(skim(cryptodata_nested$train_data[[1]]),  -->
<!--                             complete_rate > 0.02)$skim_variable -->
<!-- # Show the new object -->
<!-- example_variables -->
<!-- ``` -->
<!-- Now we can use that information to only keep these columns in the train data: -->
<!-- ```{r} -->
<!-- cryptodata_nested$train_data[[1]][, example_variables] -->
<!-- ``` -->
<!-- Great! Hopefully this change was not necessary on the first nested dataset. Now we need to apply the same idea to create a function that we can apply to all nested datasets -->
<!-- <!-- [TODO - Explain this step and process using map() better!] -->
<p>–&gt;</p>
<!-- ```{r} -->
<!-- remove_zero_var <- function(df){ -->
<!--   df[, filter(skim(df), complete_rate > 0.02)$skim_variable] -->
<!-- } -->
<!-- ``` -->
<!-- Now the function can be used in conjunction with the `map()` and `mutate()` functions to apply the function on each of the nested datasets and overwrite the old results with the new ones: -->
<!-- ```{r} -->
<!-- cryptodata_nested <- mutate(cryptodata_nested,  -->
<!--                             train_data = map(train_data, remove_zero_var)) -->
<!-- ``` -->
<!-- Now we need to do the same for the test data, but skipping over the empty  -->
<!-- [TODO - HERE AM I SKIPPING OVER EMPTY ONES OR KEEP TEST_AND_HOLDOUT AND TRAIN? SO NO NULL ROW ELEMENTS] -->
<!-- ```{r} -->
<!-- cryptodata_nested <- mutate(cryptodata_nested,  -->
<!--                             test_data = case_when(class(test_data)[[1]] == 'tbl_df' ~ map(test_data, remove_zero_var))) -->
<!-- ``` -->

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-anytime">
<p>Eddelbuettel, Dirk. 2020. <em>Anytime: Anything to Posixct or Date Converter</em>. <a href="http://dirk.eddelbuettel.com/code/anytime.html">http://dirk.eddelbuettel.com/code/anytime.html</a>.</p>
</div>
<div id="ref-R-tsibble">
<p>Wang, Earo, Di Cook, Rob Hyndman, and Mitchell O’Hara-Wild. 2020. <em>Tsibble: Tidy Temporal Data Frames and Tools</em>. <a href="https://tsibble.tidyverts.org">https://tsibble.tidyverts.org</a>.</p>
</div>
<div id="ref-R-dplyr">
<p>Wickham, Hadley, Romain François, Lionel Henry, and Kirill Müller. 2020. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="explore-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
